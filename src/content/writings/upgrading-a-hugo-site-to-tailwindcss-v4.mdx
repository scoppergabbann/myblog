---
draft: false
type: "article"
title: "Upgrading a Hugo Site to Tailwind CSS v4"
description: "A step-by-step guide to upgrading a Hugo site from Tailwind CSS v3 to v4"
pubDate: 2025-02-13T08:20:12+07:00
updatedDate: 2025-04-01T18:17:10+07:00
tags: ["Hugo", "Tailwind CSS"]
toc: true
---

import Alert from "../../components/page/Alert.astro";
import Separator from "../../components/page/Separator.astro";

I recently upgraded my site to use TailwindCSS v4. In this post, I'll guide you through the upgrade process, just as I did for my own website.

## Upgrading to v4

There are a few breaking changes, as stated in their [documentation]. Some of these will change the way we structure the Hugo project.

[documentation]: https://tailwindcss.com/docs/upgrade-guide

- TailwindCSS v4 now automatically detects the content directory unlike the previous version, where we manually listed the `layouts` and `contents` files.
- Everything moves into your `styles.css` file; we no longer use the `tailwind.config.js`.
- The PostCSS plugin now lives in the new `@tailwindcss/postcss` package.

### Step 1: Installing new dependencies

To upgrade your project from v3 to v4:

```bash
npx @tailwindcss/upgrade
```

Then install the new `@tailwindcss/postcss` package:

```bash
npm install @tailwindcss/postcss
```

From here, you can safely remove `postcss`, `postcss-cli`, and `autoprefixer` from your `package.json`.

```bash
npm uninstall postcss postcss-cli autoprefixer
```

<Alert type="warning" title="Warning!" >

When deploying the site on Vercel, make sure to install the dependencies as regular dependencies instead of DevDependencies to avoid deployment error.

</Alert>

```bash title="Log: Deployment Error"
Error: error building site: POSTCSS: failed to transform "/css/styles.css" (text/css):
Error: Loading PostCSS Plugin failed: Cannot find module '@tailwindcss/oxide-linux-x64-gnu'
```

### Step 2: Removing old files

Since `tailwind.config.js` is no longer used, migrate your custom styles to `styles.css` and add `@import "tailwindcss"`. Here's what it looks like now:

```js title="styles.css" {1} showLineNumbers
@import "tailwindcss"; // New import method

@plugin "@tailwindcss/typography";

@theme {
  --color-custom-100: oklch(0.98 0.04 113.22);
  --color-custom-200: oklch(0.94 0.11 115.03);
  ...
}
```

### Step 3: Small adjustments (optional)

I renamed my `postcss.config.js` to `postcss.config.mjs` (this may not be necessary) to match the TailwindCSS docs, so we need to update the `css.html` with the new file name:

```js title="postcss.config.mjs" "postcss.config.mjs"
{{- $styles := resources.Get "css/styles.css" | postCSS (dict "config"
"./assets/css/postcss.config.mjs") -}}
```

### Step 4: Running the site ðŸŽ‰

You can now run the site locally using `hugo server` and check for the applied TailwindCSS styles.

<Separator />

For those who are starting a new Hugo project with TailwindCSS v4, you can use the [Hugo TailwindCSS Starter Template] to quickly get up and running. This template is a clean starting point with TailwindCSS v4 already configured, so you can focus on building your content.

[Hugo TailwindCSS Starter Template]: https://github.com/odhyp/hugo-tailwindcss-starter
